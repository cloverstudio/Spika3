// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

// List of users managed by own
model User {
  id                      Int      @id      @default(autoincrement()) @map(name: "id")
  emailAddress            String?  @unique                            @map(name: "email_address")
  telephoneNumber         String?  @unique                            @map(name: "telephone_number")
  telephoneNumberHashed   String?  @unique                            @map(name: "telephone_number_hashed")
  countryCode             String?                                     @map(name: "country_code")
  displayName             String?                                     @map(name: "display_name")
  avatarUrl               String?                                     @map(name: "avatar_url")
  verificationCode        String?                                     @map(name: "verification_code")
  verified                Boolean  @default(false)                    @map(name: "verified")
  createdAt               DateTime @default(now())                    @map(name: "created_at")
  modifiedAt              DateTime @default(now())                    @map(name: "modified_at")

  @@map(name: "user")
  Device          Device[]
}

model Device {
  id             Int       @id @default(autoincrement()) @map(name: "id")
  userId         Int       @map(name: "user_id")
  User           User      @relation(fields: [userId], references: [id])
  deviceId       String    @unique @map(name: "device_id")
  type           String?   @map(name: "type")
  deviceName     String?   @map(name: "device_name")
  osName         String?   @map(name: "os_name")
  osVersion      String?      @map(name: "os_version")
  appVersion     Int?      @map(name: "app_version")
  token          String?   @map(name: "token")
  pushToken      String?   @map(name: "push_token")
  tokenExpiredAt DateTime? @map(name: "token_expired_at")

  createdAt       DateTime @default(now()) @map(name: "created_at")
  modifiedAt      DateTime @default(now()) @map(name: "modified_at")

  @@map(name: "device")
}
